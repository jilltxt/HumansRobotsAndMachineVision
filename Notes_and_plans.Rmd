---
title: "What to do with the data"
output: html_notebook
---

# Consider how to present as tidy data
**8 Feb 2022**

Coffee with James. I showed him our dataset, and complained that I'm not sure how best to represent it, and that I'm concerned that it's not tidy and really can't be, but that repeating lines makes it very confusing and gives a high risk of duplication and incorrect analysis.

Here is James's suggestion for a "true" Tidy version of the data:

-   One or more tables that GENUINELY have just one row per work (or character, or situation - so only including those variables that have just one value (like characters.csv is now)

-   a very long four column table where each row is a separate relationship between two entities

![](images/james_suggestion_for_tidy_data.jpg "Photo of whiteboard where James wrote down a suggested data representaiton")

Use `pivot_longer`to create this longer table.

Need to have the fourth column so that `pivot_wider` will make columns called things like "Creator1" and "Creator2" which will be needed. Since our dataset doesn't really differentiate between creator 1 and 2 it's fine for them to be random, and so once we have the three-column table as above we can create the fourth column more or less like this:

```{r make_fourth_column}
df %>% 
        group_by(Game, LinkType) %>% 
        mutate(LinkType, row.number) %>%  # I'm a bit unsure here exactly what he wrote!
        ungroup
```

James said this is kind of pseudocode, but basically something like this.

**Potential problems with this:**

-   Does this make it harder to figure out something like "what techRef correlates with what Sentiment?" I suppose you would join two tables? Having a separate row for every since possible connection seems extreme? 

# Make a correlation table between character traits and types of action
**14 Feb 2022**

Now that I have clusters of different **types** of verbs (seeing, attacking, evading), I could create a correlation plot (as mentioned in [Kabacoff 8.1](https://rkabacoff.github.io/datavis/Models.html#Corrplot)) that shows correlation between different character traits (e.g. gender, race, sexuality) and different verb clusters. 

Steps needed:
1. Add cluster variable to Character_verbs dataframe. 
2. Figure out whether the `mosaicData` package Kabakoff mentions will generate the matrix I need, or if I need to somehow shape the data myself. Presumably I at least need to make a column with numeric representation of the frequency with which characters with different traits use specific verbs? Probably `group_by`and `summarise` can do most of the lifting here.
3. Try  `ggcorrplot` and see what happens. 